package sep.project;

import java.awt.Color;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;

/**
 *
 * @author harald
 */
public class GUICommentEventRequest extends javax.swing.JFrame {

    /**
     * Creates new form GUICommentEventRequest
     */
    public GUICommentEventRequest(EventRequestForm e, boolean showComments) {
        this.e = e;
        initComponents();
        createUserView(showComments);
        
    }
    
    public void createUserView(boolean showComments) {
        recordNumber.setText(Integer.toString(e.recNum));
        clientName.setText(e.clientName);
        eventType.setText(e.eventType);
        startDate.setText(e.startDate);
        endDate.setText(e.endDate);
        amount.setText(Double.toString(e.expBudget));
        comment.setVisible(showComments);
        commentScroll.setVisible(showComments);
        commentLabel.setVisible(showComments);
        if (showComments) {
            if (e.receiver.equals("AdminManager")) {
                comment.setText(e.comment);
                comment.setEditable(false);
            }
            if (!e.receiver.equals("FinancialManager")) {
                submitButton.hide();
            }
        } else {
            submitButton.hide();
        }
        if  (e.isApproved()){
            decision.setText("Approved");
            decision.setForeground(Color.green);
        }
        else if (e.isRejected()){
            decision.setText("Rejected");
            decision.setForeground(Color.red);
        }
        else {
            decision.setVisible(false);
        }
        viewPreferences(e);
    }
    
    public void viewPreferences(EventRequestForm e) {
        String s = "";
        if (e.decor) {
            s = s.concat(" Decorations ,");
        }
        if (e.parties) {
            s = s.concat(" Parties ,");
        }
        if (e.photo) {
            s = s.concat(" Photos/Filming ,");
        }
        if (e.food) {
            s = s.concat(" Breakfast/Lunch/Dinner ,");
        }
        if (e.drinks) {
            s = s.concat(" Soft/Hot drinks ,");
        }
        if (!s.isEmpty()) {
            s = s.substring(1, s.length() - 1);
        }
        preferences.setText(s);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        recordNumber = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        clientName = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        eventName = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        eventType = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        startDate = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        endDate = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        commentLabel = new javax.swing.JLabel();
        commentScroll = new javax.swing.JScrollPane();
        comment = new javax.swing.JTextArea();
        submitButton = new javax.swing.JButton();
        jLabel10 = new javax.swing.JLabel();
        amount = new javax.swing.JLabel();
        preferences = new javax.swing.JLabel();
        decision = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Event Request");

        jLabel2.setText("Record number:");

        recordNumber.setText("recordNumber");

        jLabel3.setText("Client name:");

        clientName.setText("clientName");

        jLabel4.setText("Event name:");

        eventName.setText("eventName");

        jLabel5.setText("Event type:");

        eventType.setText("eventType");

        jLabel6.setText("Start date:");
        jLabel6.setToolTipText("");

        startDate.setText("startDate");

        jLabel7.setText("End date:");

        endDate.setText("endDate");

        jLabel8.setText("Preferences:");

        commentLabel.setText("Comment from Financial Manager:");

        comment.setColumns(20);
        comment.setRows(5);
        commentScroll.setViewportView(comment);

        submitButton.setBackground(new java.awt.Color(51, 255, 51));
        submitButton.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        submitButton.setForeground(new java.awt.Color(0, 0, 0));
        submitButton.setText("Submit");
        submitButton.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        submitButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                submitButtonActionPerformed(evt);
            }
        });

        jLabel10.setText("Amount: ");

        amount.setText("amount");

        preferences.setText("preferences");

        decision.setFont(new java.awt.Font("Lucida Console", 1, 36)); // NOI18N
        decision.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        decision.setText("decision");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(54, 54, 54)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(commentLabel)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel2)
                                    .addComponent(jLabel3)
                                    .addComponent(jLabel4)
                                    .addComponent(jLabel5)
                                    .addComponent(jLabel8)
                                    .addComponent(jLabel10))
                                .addGap(58, 58, 58)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(amount)
                                    .addComponent(preferences)
                                    .addComponent(eventType)
                                    .addComponent(eventName)
                                    .addComponent(clientName)
                                    .addComponent(recordNumber)))
                            .addComponent(commentScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 374, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jLabel6)
                                .addGap(18, 18, 18)
                                .addComponent(startDate)
                                .addGap(56, 56, 56)
                                .addComponent(jLabel7)
                                .addGap(18, 18, 18)
                                .addComponent(endDate))
                            .addGroup(layout.createSequentialGroup()
                                .addGap(182, 182, 182)
                                .addComponent(jLabel1))))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(221, 221, 221)
                        .addComponent(submitButton))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(165, 165, 165)
                        .addComponent(decision)))
                .addContainerGap(131, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(recordNumber))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(clientName))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(eventName))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(eventType))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(startDate)
                    .addComponent(jLabel7)
                    .addComponent(endDate)
                    .addComponent(jLabel6))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(preferences))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel10)
                    .addComponent(amount))
                .addGap(18, 18, 18)
                .addComponent(commentLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(commentScroll, javax.swing.GroupLayout.PREFERRED_SIZE, 111, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(submitButton)
                .addGap(18, 18, 18)
                .addComponent(decision)
                .addContainerGap(60, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void submitButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_submitButtonActionPerformed
        if (comment.getText().isEmpty()) {
            JOptionPane.showMessageDialog(null, "Please make a comment");
        } else {
            ServerConnector s = new ServerConnector();
            e.comment = comment.getText();
            e.sender = "FinancialManager";
            e.receiver = "AdminManager";
            try {
                s.sendForm(e);
            } catch (IOException ex) {
                Logger.getLogger(GUIFinancialRequestForm.class.getName()).log(Level.SEVERE, null, ex);
            }
            JOptionPane.showMessageDialog(null, "Comment Submitted");
            this.dispose();
        }
    }//GEN-LAST:event_submitButtonActionPerformed
    
    private EventRequestForm e;
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel amount;
    private javax.swing.JLabel clientName;
    private javax.swing.JTextArea comment;
    private javax.swing.JLabel commentLabel;
    private javax.swing.JScrollPane commentScroll;
    private javax.swing.JLabel decision;
    private javax.swing.JLabel endDate;
    private javax.swing.JLabel eventName;
    private javax.swing.JLabel eventType;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel preferences;
    private javax.swing.JLabel recordNumber;
    private javax.swing.JLabel startDate;
    private javax.swing.JButton submitButton;
    // End of variables declaration//GEN-END:variables
}
